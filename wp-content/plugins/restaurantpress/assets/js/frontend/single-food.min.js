jQuery(function(t){if("undefined"==typeof rp_single_food_params)return!1;t("body").on("init",".rp-tabs-wrapper, .restaurantpress-tabs",function(){t(".rp-tab, .restaurantpress-tabs .panel:not(.panel .panel)").hide();var e=window.location.hash,i=window.location.href,s=t(this).find(".rp-tabs, ul.tabs").first();e.toLowerCase().indexOf("comment-")>=0||"#reviews"===e||"#tab-reviews"===e?s.find("li.reviews_tab a").click():i.indexOf("comment-page-")>0||i.indexOf("cpage=")>0?s.find("li.reviews_tab a").click():"#tab-additional_information"===e?s.find("li.additional_information_tab a").click():s.find("li:first a").click()}).on("click",".rp-tabs li a, ul.tabs li a",function(e){e.preventDefault();var i=t(this),s=i.closest(".rp-tabs-wrapper, .restaurantpress-tabs");s.find(".rp-tabs, ul.tabs").find("li").removeClass("active"),s.find(".rp-tab, .panel:not(.panel .panel)").hide(),i.closest("li").addClass("active"),s.find(i.attr("href")).show()}),t(".rp-tabs-wrapper, .restaurantpress-tabs").trigger("init");var e=function(e,i){this.$target=e,this.$images=t(".restaurantpress-food-gallery__image",e),0!==this.$images.length?(e.data("food_gallery",this),this.flexslider_enabled=t.isFunction(t.fn.flexslider)&&rp_single_food_params.flexslider_enabled,this.zoom_enabled=t.isFunction(t.fn.zoom)&&rp_single_food_params.zoom_enabled,this.photoswipe_enabled="undefined"!=typeof PhotoSwipe&&rp_single_food_params.photoswipe_enabled,i&&(this.flexslider_enabled=!1!==i.flexslider_enabled&&this.flexslider_enabled,this.zoom_enabled=!1!==i.zoom_enabled&&this.zoom_enabled,this.photoswipe_enabled=!1!==i.photoswipe_enabled&&this.photoswipe_enabled),1===this.$images.length&&(this.flexslider_enabled=!1),this.initFlexslider=this.initFlexslider.bind(this),this.initZoom=this.initZoom.bind(this),this.initZoomForTarget=this.initZoomForTarget.bind(this),this.initPhotoswipe=this.initPhotoswipe.bind(this),this.onResetSlidePosition=this.onResetSlidePosition.bind(this),this.getGalleryItems=this.getGalleryItems.bind(this),this.openPhotoswipe=this.openPhotoswipe.bind(this),this.flexslider_enabled?(this.initFlexslider(),e.on("restaurantpress_gallery_reset_slide_position",this.onResetSlidePosition)):this.$target.css("opacity",1),this.zoom_enabled&&(this.initZoom(),e.on("restaurantpress_gallery_init_zoom",this.initZoom)),this.photoswipe_enabled&&this.initPhotoswipe()):this.$target.css("opacity",1)};e.prototype.initFlexslider=function(){var e=this.$target,i=this,s=t.extend({selector:".restaurantpress-food-gallery__wrapper > .restaurantpress-food-gallery__image",start:function(){e.css("opacity",1)},after:function(t){i.initZoomForTarget(i.$images.eq(t.currentSlide))}},rp_single_food_params.flexslider);e.flexslider(s),t(".restaurantpress-food-gallery__wrapper .restaurantpress-food-gallery__image:eq(0) .wp-post-image").one("load",function(){var e=t(this);e&&setTimeout(function(){var t=e.closest(".restaurantpress-food-gallery__image").height(),i=e.closest(".flex-viewport");t&&i&&i.height(t)},100)}).each(function(){this.complete&&t(this).trigger("load")})},e.prototype.initZoom=function(){this.initZoomForTarget(this.$images.first())},e.prototype.initZoomForTarget=function(e){if(!this.zoom_enabled)return!1;var i=this.$target.width(),s=!1;if(t(e).each(function(e,o){if(t(o).find("img").data("large_image_width")>i)return s=!0,!1}),s){var o=t.extend({touch:!1},rp_single_food_params.zoom_options);"ontouchstart"in window&&(o.on="click"),e.trigger("zoom.destroy"),e.zoom(o)}},e.prototype.initPhotoswipe=function(){this.zoom_enabled&&this.$images.length>0&&(this.$target.prepend('<a href="#" class="restaurantpress-food-gallery__trigger">üîç</a>'),this.$target.on("click",".restaurantpress-food-gallery__trigger",this.openPhotoswipe)),this.$target.on("click",".restaurantpress-food-gallery__image a",this.openPhotoswipe)},e.prototype.onResetSlidePosition=function(){this.$target.flexslider(0)},e.prototype.getGalleryItems=function(){var e=this.$images,i=[];return e.length>0&&e.each(function(e,s){var o=t(s).find("img"),a={src:o.attr("data-large_image"),w:o.attr("data-large_image_width"),h:o.attr("data-large_image_height"),title:o.attr("data-caption")?o.attr("data-caption"):o.attr("title")};i.push(a)}),i},e.prototype.openPhotoswipe=function(e){e.preventDefault();var i,s=t(".pswp")[0],o=this.getGalleryItems(),a=t(e.target);i=a.is(".restaurantpress-food-gallery__trigger")?this.$target.find(".flex-active-slide"):a.closest(".restaurantpress-food-gallery__image");var r=t.extend({index:t(i).index()},rp_single_food_params.photoswipe_options);new PhotoSwipe(s,PhotoSwipeUI_Default,o,r).init()},t.fn.rp_food_gallery=function(t){return new e(this,t),this},t(".restaurantpress-food-gallery").each(function(){t(this).rp_food_gallery()})});